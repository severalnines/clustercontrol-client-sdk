openapi: 3.0.1
info:
  title: Severalnines ClusterControl REST API (V2)
  description: 'REST API (V2) specification for ClusterControl - AI Powered Database automation tool
  for multi/hybrid cloud database deployment.'
  termsOfService: https://severalnines.com/terms/
  contact:
    email: sales@severalnines.com
  version: OpenAPI specification v1.0.0
externalDocs:
  description: Find out more about ClusterControl
  url: https://docs.severalnines.com/docs/clustercontrol/
servers:
- url: https://<cchost>:9501/v2
paths:
  /auth:
    post:
      tags:
      - auth
      summary: Authenticate | Logout | Password Reset | Authenticate response (with challenge)
      requestBody:
        description: Authentication parameters
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Authenticate'
        required: true
      responses:
        200:
          description: Successful authentication
          content: {}
        405:
          description: Invalid input
          content: {}
  /alarm:
    post:
      tags:
      - alarms
      summary: GetStatistics | GetAlarm | GetAlarms | IgnoreAlarm
      requestBody:
        description: All things related to Alarms and Stats
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Alarm'
        required: true
      responses:
        200:
          description: Successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AlarmResponse'
        405:
          description: Unauthorized
          content: {}
  /audit:
    post:
      tags:
      - audit
      summary: GetStatistics | GetAlarm | GetAlarms | IgnoreAlarm
      requestBody:
        description: Used to get the audit log entries
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Audit'
        required: true
      responses:
        200:
          description: Successful operation
          content: {}
        405:
          description: Unauthorized
          content: {}
  /backup:
    post:
      tags:
      - backup
      summary: GetBackups | GetBackupSchedules | ScheduleBackup | DeleteBackupRecord
      requestBody:
        description: All things related to Backups
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Backup'
        required: true
      responses:
        200:
          description: Successful operation
          content: {}
        405:
          description: Unauthorized
          content: {}
  /cloud:
    post:
      tags:
      - cloud
      summary: VerifyCredentials | ListCredentials | etc
      requestBody:
        description: calls to manage the cloud-credentials
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Cloud'
        required: true
      responses:
        200:
          description: Successful operation
          content: {}
        405:
          description: Unauthorized
          content: {}
  /clusters:
    post:
      tags:
      - clusters
      summary: GetClusterInfo | Get/Set Config | etc
      requestBody:
        description: Get cluster information
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Clusters'
        required: true
      responses:
        200:
          description: Successful operation
          content: {}
        405:
          description: Unauthorized
          content: {}
  /config:
      post:
        tags:
        - config
        summary: GetConfig | xxx | xxx | etc
        requestBody:
          description: Provides access to various Cmon configuration files
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Config'
          required: true
        responses:
          200:
            description: Successful operation
            content: {}
          405:
            description: Unauthorized
            content: {}
  /controller:
    post:
      tags:
      - controller
      summary: Ping | Heartbeat | etc
      requestBody:
        description: Managing controller and operate the Cmon HA subsystem
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Controller'
        required: true
      responses:
        200:
          description: Successful operation
          content: {}
        405:
          description: Unauthorized
          content: {}
  /discovery:
    post:
      tags:
      - discovery
      summary: CheckClusterName | CheckHosts | GetSupportedClusterTypes
      requestBody:
        description: All things related to Clusters and cluster Hosts
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Discovery'
        required: true
      responses:
        200:
          description: Successful operation
          content: {}
        405:
          description: Unauthorized
          content: {}
  /host:
    post:
      tags:
      - host
      summary: Path for managing servers
      requestBody:
        description: (Un)Register servers, Shutdown servers, etc
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Host'
        required: true
      responses:
        200:
          description: Successful operation
          content: {}
        405:
          description: Unauthorized
          content: {}
  /jobs:
    post:
      tags:
      - jobs
      summary: CreateJobInstance | etc
      requestBody:
        description: Creating, manipulating, and obtaining information about jobs
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Jobs'
        required: true
      responses:
        200:
          description: Successful operation
          content: {}
        405:
          description: Unauthorized
          content: {}
  /maintenance:
    post:
      tags:
      - maintenance
      summary: CreateJobInstance | etc
      requestBody:
        description: Creating, deleting and obtaining maintenance periods
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Maintenance'
        required: true
      responses:
        200:
          description: Successful operation
          content: {}
        405:
          description: Unauthorized
          content: {}
  /reports:
    post:
      tags:
      - reports
      summary: GenerateReport | etc
      requestBody:
        description: Provides access to reports generated by the Cmon controller
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Reports'
        required: true
      responses:
        200:
          description: Successful operation
          content: {}
        405:
          description: Unauthorized
          content: {}
  /stat:
    post:
      tags:
      - stat
      summary: GetInfo | etc
      requestBody:
        description: Provides calls to access various statistical information about the cluster
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Stat'
        required: true
      responses:
        200:
          description: Successful operation
          content: {}
        405:
          description: Unauthorized
          content: {}
  /stat/cmonagent:
    post:
      tags:
      - statCmonAgent
      summary: GetInfo | etc
      requestBody:
        description: Provides calls to access various statistical information about the cluster
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/StatCmonAgent'
        required: true
      responses:
        200:
          description: Successful operation
          content: {}
        405:
          description: Unauthorized
          content: {}
  /stat/prometheus/query:
    post:
      tags:
      - statPrometheus
      summary: GetInfo | etc
      requestBody:
        description: Provides calls to access various statistical information about the cluster
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/StatPrometheus'
        required: true
      responses:
        200:
          description: Successful operation
          content: {}
        405:
          description: Unauthorized
          content: {}
  /users:
    post:
      tags:
      - users
      summary: CreateUser | etc
      requestBody:
        description: Manipulate Cmon Users, users that are maintained by the Cmon controller
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Users'
        required: true
      responses:
        200:
          description: Successful operation
          content: {}
        405:
          description: Unauthorized
          content: {}
  /tree:
    post:
      tags:
      - tree
      summary: AddACL | RemoveAcl | etc
      requestBody:
        description: Manipulate ACLs for Groups and Users that are maintained by the Cmon controller
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Tree'
        required: true
      responses:
        200:
          description: Successful operation
          content: {}
        405:
          description: Unauthorized
          content: {}
components:
  schemas:
    Authenticate:
      type: object
      required:
      - operation
      properties:
        operation:
          type: string
          enum: ["authenticateWithPassword","authenticate","authenticateresponse",
            "logout","passwordReset","newpassword"]
        user_name:
          type: string
        password:
          type: string
        signature:
          type: string
        new_password:
          type: string
        password_reset_token:
          type: string
    Alarm:
      type: object
      required:
      - operation
      properties:
        operation:
          type: string
          enum: ["getStatistics","getAlarm","getAlarms","ignoreAlarm"]
        cluster_id:
          type: integer
        alarm_id:
          type: integer
        class_name:
          type: string
          enum: ["CmonRpcRequest"]
        ignore:
          type: boolean
    AlarmResponse:
      type: object
      properties:
        operation:
          type: string
          enum: ["getStatistics","getAlarm","getAlarms","ignoreAlarm"]
        cluster_id:
          type: integer
        alarm_id:
          type: integer
        class_name:
          type: string
          enum: ["CmonRpcRequest"]
        ignore:
          type: boolean
    Audit:
      type: object
      required:
      - operation
      properties:
        operation:
          type: string
          enum: ["getEntries"]
        cluster_ids:
          type: array
          items:
            type: integer
        ascending:
          type: boolean
    Backup:
      type: object
      required:
      - operation
      properties:
        operation:
          type: string
          enum: ["getBackups","getBackupSchedules","scheduleBackup","deleteBackupRecord"]
        cluster_id:
          type: integer
        ascending:
          type: boolean
        schedule:
          type: object
          properties:
            class_name:
              type: string
              enum: ["CmonBackupSchedule"]
            enabled:
              type: boolean
            schedule:
              type: string
            schedule_id:
              type: integer
            job:
              type: object
              properties:
                command:
                  type: string
                  enum: ["backup"]
                job_data:
                  type: object
                  properties:
                    description:
                      type: string
                    backup_failover:
                      type: boolean
                    backup_failover_host:
                      type: string
                      enum: ["auto"]
                    backup_method:
                      type: string
                      enum: ["pg_basebackup","xtrabackupfull","xtrabackupincr","pgbackrestfull","pgbackrestincr","pgbackrestdiff","mysqldump",
                      "mongodump","percona-backup-mongodb","pgdumpall","mariabackupfull","mariabackupincr","mssqlcert","ndb"]
                    backup_retention:
                      type: integer
                    backupdir:
                      type: string
                    backupsubdir:
                      type: string
                    cc_storage:
                      type: string
                    compression:
                      type: boolean
                    compresion_level:
                      type: integer
                    encrypt_backup:
                      type: boolean
                    hostname:
                      type: string
                    port:
                      type: integer
                    verify_backup_delay:
                      type: integer
                    verify_backup:
                      type: object
                      properties:
                        disable_firewall:
                          type: boolean
                        disable_selinux:
                          type: boolean
                        install_software:
                          type: boolean
                        server_address:
                          type: string
                        terminate_db_server:
                          type: boolean
        backup_record:
          type: object
          properties:
            backup_id:
              type: integer
    Cloud:
      type: object
      required:
      - operation
      properties:
        operation:
          type: string
          enum: ["verifyCredentials","listCredentials","getCredentials",
            "addCredentials","updateCredentials","removeCredentials"]
        provider:
          type: string
        name:
          type: string
        comment:
          type: string
        id:
          type: integer
        credentials:
          type: object
          properties:
            access_key_id:
              type: string
            access_key_secret:
              type: string
            access_key_region:
              type: string
    Clusters:
      type: object
      required:
      - operation
      properties:
        operation:
          type: string
          enum: ["getallclusterinfo","getclusterinfo","getConfig","setConfig","createAccount",
            "getAccounts","deleteAccount","grantPrivileges","revokePrivileges","revokeAllPrivileges",
            "getSqlProcesses","getTopQueries","createDatabase","ping","availableUpgrades"]
        cluster_id:
          type: integer
        cluster_name:
          type: string
        with_hosts:
          type: boolean
        with_sheet_info:
          type: boolean
        configuration:
          type: array
          items:
            type: object
            properties:
              name:
                type: string
              value:
                type: string
        account:
          type: object
          properties:
            class_name:
              type: string
              enum: ["CmonAccount"]
            grants:
              type: string
              description: e.g. "john:ALL;pipas:INSERT"
            host_allow:
              type: string
              description: e.g. "1.2.3.4"
            own_database:
              type: string
            privileges:
              type: string
              description: e.g. "testCreateDatabase.*:DELETE,TRUNCATE"
            user_name:
              type: string
              description: e.g. "pipas"
            password:
              type: string
        filter_strings:
          type: string
        limit:
          type: integer
        offset:
          type: integer
        database:
          type: object
          properties:
            class_name:
              type: string
              enum: ["CmonDataBase"]
            database_name:
              type: string
        nodes:
          type: array
          items:
            type: string
            description: List of nodes (hosts) to query available package upgrades on
    ClusterResponse:
      type: object
      properties:
        class_name:
          type: string
        operation:
          type: string
        cluster_id:
          type: integer
        cluster_name:
          type: string
        cluster_type:
          type: string
        vendor:
          type: string
        version:
          type: string
        tags:
          type: array
          items:
            type: string
        hosts:
          type: array
          items:
            type: object
            properties:
              class_name:
                type: string
              hostid:
                type: integer
              datadir:
                type: string
              hostname:
                type: string
              hostname_data:
                type: string
              hostname_internal:
                type: string
              role:
                type: string
              synchronous:
                type: boolean
              member_role:
                type: string
              roleid:
                type: integer
              rs:
                type: string
              version:
                type: string
              elastic_roles:
                type: string
              replica:
                type: object
                properties:
                  availability_mode:
                    type: string
                  failover_mode:
                    type: string
                  connected_state:
                    type: string              
              replication_slave:
                type: object
                properties:
                  master_host:
                    type: string
                  master_cluster_id:
                    type: integer
                  semisync_status:
                    type: string
              replication_master:
                type: object
                properties:
                  slave_info:
                    type: object
                    properties:
                      slaves:
                        type: array
                        items:
                          type: object
                          properties:
                            failover_mode:
                              type: string
    Config:
      type: object
      required:
      - operation
      properties:
        operation:
          type: string
          enum: ["getConfig","setConfig","unsetConfig","getLdapConfig",
            "setLdapConfig","setLicense","getLicense","listTemplates"]
        hostname:
          type: string
        port:
          type: integer
        configuration:
          type: array
          items:
            type: object
            properties:
              name:
                type: string
              value:
                type: string
              group:
                type: string
                description: Group name
        ldap_configuration:
          type: object
          properties:
            enabled:
              type: boolean
            ldapAdminPassword:
              type: string
            ldapAdminUser:
              type: string
            ldapGroupSearchRoot:
              type: string
            ldapServerUri:
              type: string
            ldapUserSearchRoot:
              type: string
            groupMappings:
              type: array
              items:
                type: object
                properties:
                  cmonGroupName:
                    type: string
                  ldapGroupId:
                    type: string
                  sectionName:
                    type: string
            ldapSettings:
              type: object
              properties:
                ldapEmailAttributes:
                  type: string
                ldapGroupClassName:
                  type: string
                ldapGroupIdAttributes:
                  type: string
                ldapGroupNameAttribute:
                  type: string
                ldapMemberAttributes:
                  type: string
                ldapNetworkTimeout:
                  type: string
                ldapProtocolVersion:
                  type: string
                ldapQueryTimeLimit:
                  type: string
                ldapRealnameAttributes:
                  type: string
                ldapUserClassName:
                  type: string
                ldapUsernameAttributes:
                  type: string
            security:
              type: object
              properties:
                caCertFile:
                  type: string
                certFile:
                  type: string
                keyFile:
                  type: string
        licensedata:
          type: string
    Controller:
      type: object
      required:
      - operation
      properties:
        operation:
          type: string
          enum: ["ping","heartBeat"]
        client_ip_address:
          type: string
        controller_key:
          type: string
    Discovery:
      type: object
      required:
      - operation
      properties:
        operation:
          type: string
          enum: ["checkClusterName","getSupportedClusterTypes","checkHosts"]
        new_cluster_name:
          type: string
        check_if_already_registered:
          type: boolean
        check_job:
          type: boolean
        check_ssh_sudo:
          type: boolean
        nodes:
          type: array
          items:
            type: object
            properties:
              class_name:
                type: string
                enum: ["CmonHost","CmonMySqlHost","CmonPostgreSqlHost","CmonProxySqlHost",
                  "CmonHaProxyHost"]
              host_name:
                type: string
                description: IP address or Hostname
              port:
                type: integer
        job:
          description: Also ckeck the passed create_cluster job
          type: object
          properties:
            class_name:
              type: string
              enum: ["CmonJobInstance"]
            job_spec:
              type: object
              properties:
                command:
                  type: string
                  enum: ["create_cluster"]
                job_data:
                  type: object
                  properties:
                    cluster_type:
                      type: string
                      enum: ["group_replication"]
                    mysql_version:
                      type: string
                    vendor:
                      type: string
                    nodes:
                      type: array
                      items:
                        type: object
                        properties:
                          class_name:
                            type: string
                            enum: ["CmonHost"]
                          host_name:
                            type: string
                            description: IP address or Hostname
        ssh_credentials:
          type: object
          properties:
            class_name:
              type: string
            user_name:
              type: string
            password:
              type: string
            ssh_keyfile:
              type: string
    Host:
      type: object
      required:
      - operation
      properties:
        operation:
          type: string
          enum: ["startServers","shutdownServers","registerServers",
            "unregisterServers","unregisterHost"]
        servers:
          type: array
          items:
            type: object
            properties:
              class_name:
                type: string
                enum: ["CmonContainerServer"]
              hostname:
                type: string
              cdt_path:
                type: string
        cluster_id:
          type: integer
        dry_run:
          type: boolean
        host:
          type: object
          properties:
            class_name:
              type: string
            hostname:
              type: string
            port:
              type: integer
    Jobs:
      description: Creating and manipulating jobs, reading information about jobs
      type: object
      required:
      - operation
      properties:
        operation:
          type: string
          enum: ["createJobInstance","updateJobInstance","deleteJobInstance",
            "killJobInstance","cloneJobInstance","getJobInstance","getJobInstances",
            "getJobLog"]
        cluster_id:
          type: integer
        job_id:
          type: integer
        signal:
          type: integer
        ascending:
          type: boolean
        limit:
          type: integer
        offset:
          type: integer
        log_level:
          type: string
        job:
          type: object
          properties:
            class_name:
              type: string
            job_spec:
              type: object
              properties:
                command:
                  type: string
                  enum: ["rolling_restart","create_cluster","remove_cluster","add_cluster",
                  "backup","verify_backup","deploy_agents","pbmagent","addnode",
                  "pgbouncer","promote_replication_slave","setup_audit_logging",
                  "disable_recovery","enable_recovery","restart","enable_db_readonly",
                  "error_report","calculate_db_growth","enable_node_recovery",
                  "disable_node_recovery","check_pkg_upgrades","upgrade_cluster",
                  "success","add_replication_slave","deploy_cmonagents","delete_backup",
                  "registernode","removenode","add_shard","garbd","pgbouncer","haproxy"
                  "proxysql"]
                id:
                  type: integer
                job_data:
                  type: object
                  properties:
                    action:
                      type: string
                      enum: ["enable","setup","setupHaProxy","setupProxySql"]
                    addnode:
                      type: boolean
                    admin_username:
                      type: string
                    admin_user:
                      type: string
                    admin_password:
                      type: string
                    audit_events:
                      type: string
                    archive_mode:
                      type: string
                      enum: ["always"]
                    backupid:
                      type: integer
                    backup_id:
                      type: integer
                    build_from_source:
                      type: boolean
                    cluster_name:
                      type: string
                    clusterid:
                      type: integer
                    cluster_type:
                      type: string
                      enum: ["mssql_single","redis","mongodb","mssql_ao_async",
                        "postgresql_single","replication","galera","elastic"]
                    company_id:
                      type: string
                    config_template:
                      type: string
                    backup_failover:
                      type: boolean
                    backup_failover_host:
                      type: string
                      enum: ["auto"]
                    backup_method:
                      type: string
                      enum: ["pg_basebackup","xtrabackupfull","xtrabackupincr","pgbackrestfull","pgbackrestincr","pgbackrestdiff","mysqldump",
                      "mongodump","percona-backup-mongodb","pgdumpall","mariabackupfull","mariabackupincr","mssqlcert","ndb"]
                    backup_mysqldump_type:
                      type: string
                      enum: ["Complete","SchemaAndData","SchemaOnly","DataOnly","MySQLDbOnly"]
                    backup_individual_schemas:
                      type: boolean
                    backup_retention:
                      type: integer
                    extended_insert:
                      type: boolean
                    backup_dir:
                      type: string
                    backupsubdir:
                      type: string
                    cc_storage:
                      type: string
                    compression:
                      type: boolean
                    compression_level:
                      type: integer
                    db_database:
                      type: string
                    db_password:
                      type: string
                    db_privs:
                      type: string
                    db_username:
                      type: string
                    data_center:
                      type: integer
                    exec_upgrade_script:
                      type: boolean
                    extended:
                      type: boolean
                    listening_port:
                      type: integer
                    mask_passwords:
                      type: boolean
                    monitor_password:
                      type: string
                    monitor_user:
                      type: string
                    use_clustering:
                      type: boolean
                    use_rw_split:
                      type: boolean
                    hostname:
                      type: string
                    master_address:
                      type: string
                    include_databases:
                      type: string
                    install_timescaledb:
                      type: boolean
                    update_lb:
                      type: boolean
                    usePackageForDataDir:
                      type: boolean
                    encrypt_backup:
                      type: boolean
                    throttle_rate_netbw:
                      type: integer
                    use_pigz:
                      type: boolean
                    use_qpress:
                      type: boolean
                    wsrep_desync:
                      type: boolean
                    xtrabackup_backup_locks:
                      type: boolean
                    xtrabackup_lock_ddl_per_table:
                      type: boolean
                    xtrabackup_parallellism:
                      type: integer
                    verify_backup_delay:
                      type: integer
                    data_dir:
                      type: string
                    db_user:
                      type: string
                    disable_firewall:
                      type: boolean
                    disable_selinux:
                      type: boolean
                    enable_uninstall:
                      type: boolean
                    generate_token:
                      type: boolean
                    install_software:
                      type: boolean
                    use_internal_repos:
                      type: boolean
                    local_repository:
                      type: string
                    enable_mysql_uninstall:
                      type: boolean
                    mysql_semi_sync:
                      type: boolean
                    enable_ssl:
                      type: boolean
                    mongos_conf_template:
                      type: string
                    mongodb_authdb:
                      type: string
                    node_type:
                      type: integer
                    overwrite_mysqlchk:
                      type: boolean
                    port:
                      type: integer
                    ssh_keyfile:
                      type: string
                    ssh_port:
                      type: string
                    ssh_user:
                      type: string
                    sudo_password:
                      type: string
                    user_id:
                      type: integer
                    vendor:
                      type: string
                      enum: ["default","percona","microsoft","redis","oracle","mariadb","elasticsearch","10gen"]
                    type:
                      type: string
                      enum: ["postgresql","redis","microsoft","elasticsearch","mysql","mongodb"]
                    version:
                      type: string
                    software_package:
                      type: string
                    server_address:
                      type: string
                    terminate_db_server:
                      type: boolean
                    xtrabackup_use_memory:
                      type: integer
                    initial:
                      type: boolean
                    reboot:
                      type: boolean
                    slave_address:
                      type: string
                    force:
                      type: boolean
                    force_stop:
                      type: boolean
                    stop_timeout:
                      type: integer
                    pitr_stop_time:
                      type: string
                    pitr_stop_log:
                      type: string
                    pitr_stop_pos:
                      type: integer
                    host_location_uuid:
                      type: string
                    bootstrap:
                      type: boolean
                    snapshot_location:
                      type: string
                    snapshot_repository:
                      type: string
                    storage_host:
                      type: string
                    deploy_agents:
                      type: boolean
                    upload_backup_data_to_cloud_storage:
                      type: object
                      properties:
                        backup_retention:
                          type: integer
                        bucket:
                          type: string
                        cloud_storage_credentials_id:
                          type: integer
                        cloud_storage_provider:
                          type: string
                        cloud_storage_service:
                          type: string
                        delete_after_upload:
                          type: boolean                        
                    verify_backup:
                      type: object
                      properties:
                        disable_firewall:
                          type: boolean
                        disable_selinux:
                          type: boolean
                        install_software:
                          type: boolean
                        server_address:
                          type: string
                        terminate_db_server:
                          type: boolean
                    config_servers:
                      type: object
                      properties:
                        rs:
                          type: string
                        members:
                          type: array
                          items:
                            type: object
                            properties:
                              hostname:
                                type: string
                              hostname_data:
                                type: string
                              hostname_internal:
                                type: string
                              port:
                                type: string
                    mongos_servers:
                      type: array
                      items:
                        type: object
                        properties:
                          hostname:
                            type: string
                          hostname_data:
                            type: string
                          hostname_internal:
                            type: string
                          port:
                            type: string
                    node:
                      type: object
                      properties:
                        backend_name_ro:
                          type: string
                        backend_name_rw:
                          type: string
                        data_retention:
                          type: string
                        data_retention_size:
                          type: integer
                        hostname:
                          type: string
                        lb_admin:
                          type: string
                        lb_password:
                          type: string
                        lb_policy:
                          type: string
                        max_connection_be:
                          type: integer
                        max_connection_fe:
                          type: integer
                        port:
                          type: integer
                        ro_port:
                          type: integer
                        rw_port:
                          type: integer
                        rw_splitting:
                          type: boolean
                        stats_socket:
                          type: string
                        timeout_client:
                          type: integer
                        timeout_server:
                          type: integer
                        xinetd_allow_from:
                          type: string
                        scrape_interval:
                          type: string
                        configuration:
                          type: array
                          items:
                            type: object
                            properties:
                              arguments:
                                type: string
                              job:
                                type: string
                                enum: ["node","mysqld","mongo"]
                              scrape_interval:
                                type: string
                    nodes:
                      type: array
                      items:
                        type: object
                        properties:
                          class_name:
                            type: string
                            enum: ["CmonRedisHost","CmonRedisSentinelHost","CmonHost",
                              "CmonPBMAgentHost","CmonPgBouncerHost","CmonMsSqlHost","CmonElasticHost"]
                          cdt_path:
                            type: string
                          acl:
                            type: string
                          clusterid:
                            type: integer
                          ip:
                            type: string
                          maintenance_mode:
                            type: string
                            enum: ["none"]
                          maintenance_mode_active:
                            type: boolean
                          timestamp:
                            type: integer
                          unique_id:
                            type: integer
                          hostname:
                            type: string
                          hostname_data:
                            type: string
                          hostname_internal:
                            type: string
                          port:
                            type: string
                          nodetype:
                            type: string
                          configfile:
                            type: string
                          datadir:
                            type: string
                          backup_dir:
                            type: string
                          synchronous:
                            type: boolean
                          protocol:
                            type: string
                            enum: ["elastic"]
                          roles:
                            type: string
                            enum: ["master","data","master-data"]
                    node_adresses:
                      type: array
                      items:
                        type: object
                        properties:
                          hostname:
                            type: string
                          max_connection:
                            type: integer
                          max_replication_lag:
                            type: integer
                          port:
                            type: integer
                          weight:
                            type: integer
                    topology:
                      type: object
                      properties:
                        master_slave_links:
                          type: array
                          items:
                            type: object
                            additionalProperties:
                              type: string
                    replica_sets:
                      type: array
                      items:
                        type: object
                        properties:
                          rs:
                            type: string
                          members:
                            type: array
                            items:
                              type: object
                              properties:
                                hostname:
                                  type: string
                                hostname_data:
                                  type: string
                                hostname_internal:
                                  type: string
                                port:
                                  type: string
                                arbiter_only:
                                  type: boolean
                                hidden:
                                  type: boolean
                                priority:
                                  type: integer
                                slave_delay:
                                  type: string
                    with_tags:
                      type: array
                      items:
                        type: string
            recurrence:
              type: string
              description: e.g. "2 * * * *"
            tags:
              type: array
              items:
                type: string
            title:
              type: string
              enum: ["Rolling Restart","Simulated Success"]
            status:
              type: string
              enum: ["PAUSED","SCHEDULED"]
    Maintenance:
      type: object
      required:
      - operation
      properties:
        operation:
          type: string
          enum: ["addMaintenance","removeMaintenance","getMaintenance",
            "getCurrentMaintenance","getNextMaintenance"]
        cluster_id:
          type: integer
        deadline:
          type: string
        initiate:
          type: string
        hostname:
          type: string
        UUID:
          type: string
    Reports:
      type: object
      required:
      - operation
      properties:
        operation:
          type: string
          enum: ["generateReport","getReport","deleteReport","getReports","getReportTemplates"]
        cluster_id:
          type: integer
        report:
          type: object
          properties:
            class_name:
              type: string
              enum: ["CmonReport"]
            recipients:
              type: string
              description: Email of recipient
            report_type:
              type: string
              description: TODO
            text_format:
              type: string
              enum: ["AnsiTerminal"]
            report_id:
              type: integer
    Stat:
      type: object
      required:
      - operation
      properties:
        operation:
          type: string
          enum: ["getInfo","statByName","getCpuPhysicalInfo","getDbGrowth"]
        cluster_id:
          type: integer
        name:
          type: string
          enum: ["cpustat"]
          description: stat name. e.g. cpustat
        start_datetime:
          type: string
          description: e.g. "15:20"
        end_datetime:
          type: string
          description: e.g. "15:21"
        with_hosts:
          type: boolean
        calculate_per_sec:
          type: boolean
    StatCmonAgent:
      type: object
      required:
      - operation
      properties:
        operation:
          type: string
          enum: ["/cmonagent"]
        apiKey:
          type: string
        className:
          type: string
          enum: ["CmnRequest"]
        requestData:
          type: object
          properties:
            begin:
              type: string
              description: e.g. "2021-06-07T09:41:43.636Z"
            className:
              type: string
              enum: ["CmnReadParam"]
            end:
              type: string
              description: e.g. "2021-06-07T09:41:43.636Z"
            limit:
              type: integer
            mimeType:
              type: string
            objectName:
              type: string
            origin:
              type: string
              enum: ["timeline"]  
    StatPrometheus:
      type: object
      required:
      - operation
      properties:
        operation:
          type: string
          enum: ["/prometheus"]
        cluster_id:
          type: integer
        cluster_name:
          type: string
        queries:
          type: array
          items:
            type: object
            properties:
              query:
                type: string
                description: "mysql_global_status_wsrep_cert_deps_distance{instance=~\"10.117.12.165(:[0-9]+)?\"}"
              step:
                type: integer
                description: e.g. 10
        start:
          type: integer
          description: Seconds since 1970. e.g. 1622105617
        end:
          type: integer
          description: Seconds since 1970. e.g. 1622108317
        step:
          type: integer
        returnfrom:
          type: integer
    Users:
      type: object
      required:
      - operation
      properties:
        operation:
          type: string
          enum: ["createUser","getUsers","setUser","disable","deleteUser","enable",
            "changePassword","getKeys","addKey","deleteKey","createGroup",
            "deleteGroup", "getGroups","addToGroup","removeFromGroup",
            "canCreateUser","canCreateGroup"]
        create_group:
          type: boolean
        new_password:
          type: string
        old_password:
          type: string
        group_name:
          type: string
        replace_primary_group:
          type: boolean
        with_tags:
          type: array
          items:
            type: string
        user:
          type: object
          properties:
            class_name:
              type: string
              enum: ["CmonUser"]
            user_name:
              type: string
            user_id:
              type: integer
            first_name:
              type: string
            last_name:
              type: string
            email_address:
              type: string
            new_password:
              type: string
            old_password:
              type: string
            groups:
              type: array
              items:
                type: object
                properties:
                  class_name:
                    type: string
                  group_name:
                    type: string
                  group_id:
                    type: integer
            timezone:
              type: object
              properties:
                class_name:
                  type: string
                abbreviation:
                  type: string
                name:
                  type: string
                offset:
                  type: integer
                use_dst:
                  type: boolean
            public_keys:
              type: array
              items:
                type: object
                properties:
                  key:
                    type: string
                  name:
                    type: string
            public_key:
              type: array
              items:
                type: object
                properties:
                  key:
                    type: string
                  name:
                    type: string
        group:
          type: object
          properties:
            class_name:
              type: string
              enum: ["CmonGroup"]
            group_name:
              type: string
    Tree:
      type: object
      required:
      - operation
      properties:
        operation:
          type: string
          enum: ["addAcl","removeAcl"]
        acl:
          type: string
        path:
          type: string
